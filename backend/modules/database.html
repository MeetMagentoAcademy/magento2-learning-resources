
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Acessing databade Â· GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="../../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="service_contracts.html" />
    
    
    <link rel="prev" href="flash_message.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../../">
            
                <a href="../../">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">1. Sysops</li>
        
        
    
        <li class="chapter " data-level="2.1" data-path="../../sysops/part1.html">
            
                <a href="../../sysops/part1.html">
            
                    
                    Part 1 - Virtual machine
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2" data-path="../../sysops/part2.html">
            
                <a href="../../sysops/part2.html">
            
                    
                    Part 2 - Configuring network for VM
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.3" data-path="../../sysops/part3.html">
            
                <a href="../../sysops/part3.html">
            
                    
                    Part 3 - Dedicated user for Magento processes
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.4" data-path="../../sysops/part4.html">
            
                <a href="../../sysops/part4.html">
            
                    
                    Part 4 - Debian repositories
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.5" data-path="../../sysops/part5.html">
            
                <a href="../../sysops/part5.html">
            
                    
                    Part 5 - MySQL installation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.6" data-path="../../sysops/part6.html">
            
                <a href="../../sysops/part6.html">
            
                    
                    Part 6 - PHP
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.7" data-path="../../sysops/part7.html">
            
                <a href="../../sysops/part7.html">
            
                    
                    Part 7 - Web server
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.8" data-path="../../sysops/part8.html">
            
                <a href="../../sysops/part8.html">
            
                    
                    Part 8 - Two Redis instances
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.9" data-path="../../sysops/part9.html">
            
                <a href="../../sysops/part9.html">
            
                    
                    Part 9 - Code deployment
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.10" data-path="../../sysops/part10.html">
            
                <a href="../../sysops/part10.html">
            
                    
                    Part 10 - Cron jobs
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.11" data-path="../../sysops/AUTHORS.html">
            
                <a href="../../sysops/AUTHORS.html">
            
                    
                    Authors
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">2. Administration</li>
        
        
    
        <li class="chapter " data-level="3.1" data-path="../../administration/part1.html">
            
                <a href="../../administration/part1.html">
            
                    
                    Part 1 - Basic store configuration
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.2" data-path="../../administration/part2.html">
            
                <a href="../../administration/part2.html">
            
                    
                    Part 2 - Creating catalog - products
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.3" data-path="../../administration/part3.html">
            
                <a href="../../administration/part3.html">
            
                    
                    Part 3 - Creating catalog - attributes
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.4" data-path="../../administration/part4.html">
            
                <a href="../../administration/part4.html">
            
                    
                    Part 4 - Creating catalog - categories
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.5" data-path="../../administration/part5.html">
            
                <a href="../../administration/part5.html">
            
                    
                    Part 5 - Marketing - Catalog price rules 
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.6" data-path="../../administration/part6.html">
            
                <a href="../../administration/part6.html">
            
                    
                    Part 6 - Marketing - Cart price rules 
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.7" data-path="../../administration/part7.html">
            
                <a href="../../administration/part7.html">
            
                    
                    Part 7 - Marketing - Customers
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.8" data-path="../../administration/part8.html">
            
                <a href="../../administration/part8.html">
            
                    
                    Part 8 - Marketing - Email templates
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.9" data-path="../../administration/part9.html">
            
                <a href="../../administration/part9.html">
            
                    
                    Part 9 - Orders management
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.10" data-path="../../administration/part10.html">
            
                <a href="../../administration/part10.html">
            
                    
                    Part 10 - Payments Methods
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.11" data-path="../../administration/part11.html">
            
                <a href="../../administration/part11.html">
            
                    
                    Part 11 - Shipping methods
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.12" data-path="../../administration/part12.html">
            
                <a href="../../administration/part12.html">
            
                    
                    Part 12 - Store Setting Conf
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.13" data-path="../../administration/part13.html">
            
                <a href="../../administration/part13.html">
            
                    
                    Part 13 - Export/Import products
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.14" data-path="../../administration/part14.html">
            
                <a href="../../administration/part14.html">
            
                    
                    Part 14 - Reports
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.15" data-path="../../administration/part15.html">
            
                <a href="../../administration/part15.html">
            
                    
                    Contact/ Q&A
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">3. Backend</li>
        
        
    
        <li class="chapter " data-level="4.1" data-path="../modules.html">
            
                <a href="../modules.html">
            
                    
                    Modules
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="4.1.1" data-path="create.html">
            
                <a href="create.html">
            
                    
                    Creating modules
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.1.2" data-path="controller.html">
            
                <a href="controller.html">
            
                    
                    Defining controllers
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.1.3" data-path="layout.html">
            
                <a href="layout.html">
            
                    
                    Rendering page layout
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.1.4" data-path="translations.html">
            
                <a href="translations.html">
            
                    
                    Translations
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.1.5" data-path="store_configuration.html">
            
                <a href="store_configuration.html">
            
                    
                    Store configuration
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.1.6" data-path="flash_message.html">
            
                <a href="flash_message.html">
            
                    
                    Flash message
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="4.1.7" data-path="database.html">
            
                <a href="database.html">
            
                    
                    Acessing databade
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.1.8" data-path="service_contracts.html">
            
                <a href="service_contracts.html">
            
                    
                    APIs
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="4.2" data-path="../performance.html">
            
                <a href="../performance.html">
            
                    
                    Performance
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="4.2.1" data-path="../performance/profiler.html">
            
                <a href="../performance/profiler.html">
            
                    
                    Profiler
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.2.2" data-path="../performance/eav.html">
            
                <a href="../performance/eav.html">
            
                    
                    EAV explained
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="4.3" data-path="../di.html">
            
                <a href="../di.html">
            
                    
                    Dependency Injection
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">4. Frontend</li>
        
        
    
        <li class="chapter " data-level="5.1" data-path="../../frontend/themes/overview.html">
            
                <a href="../../frontend/themes/overview.html">
            
                    
                    Themes
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="5.1.1" data-path="../../frontend/themes/structure.html">
            
                <a href="../../frontend/themes/structure.html">
            
                    
                    Structure
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.1.2" data-path="../../frontend/themes/inheritance.html">
            
                <a href="../../frontend/themes/inheritance.html">
            
                    
                    Inheritance
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.1.3" data-path="../../frontend/themes/debug.html">
            
                <a href="../../frontend/themes/debug.html">
            
                    
                    Debuging
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="5.2" data-path="../../frontend/layout/overview.html">
            
                <a href="../../frontend/layout/overview.html">
            
                    
                    Layout
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="5.2.1" data-path="../../frontend/layout/types.html">
            
                <a href="../../frontend/layout/types.html">
            
                    
                    Types
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.2.2" data-path="../../frontend/layout/examples.html">
            
                <a href="../../frontend/layout/examples.html">
            
                    
                    Examples
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="5.3" data-path="../../frontend/templates/overview.html">
            
                <a href="../../frontend/templates/overview.html">
            
                    
                    Templates
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.4" data-path="../../frontend/styles/overview.html">
            
                <a href="../../frontend/styles/overview.html">
            
                    
                    Styles
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="5.4.1" data-path="../../frontend/styles/grunt.html">
            
                <a href="../../frontend/styles/grunt.html">
            
                    
                    Grunt
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.4.2" data-path="../../frontend/styles/sass.html">
            
                <a href="../../frontend/styles/sass.html">
            
                    
                    SASS
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.4.3" data-path="../../frontend/styles/magento-ui.html">
            
                <a href="../../frontend/styles/magento-ui.html">
            
                    
                    Magento UI
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="5.5" data-path="../../frontend/javascript/overview.html">
            
                <a href="../../frontend/javascript/overview.html">
            
                    
                    JavaScript
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="5.5.1" data-path="../../frontend/javascript/requirejs.html">
            
                <a href="../../frontend/javascript/requirejs.html">
            
                    
                    Require.js
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.5.2" data-path="../../frontend/javascript/using-amd.html">
            
                <a href="../../frontend/javascript/using-amd.html">
            
                    
                    AMD
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.5.3" data-path="../../frontend/javascript/custom.html">
            
                <a href="../../frontend/javascript/custom.html">
            
                    
                    Custom modules
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="../.." >Acessing databade</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="accessing-database">Accessing database</h1>
<p>In Magento 2 database persistence layer is direct port of Magento 1 solution and we expect it&apos;s major overhaul in next releases.</p>
<p>Object relation mapping default implementation is quite simple - object structure is inferred based on result of <code>DESCRIBE TABLE</code> operation.
Because of that no mapping definition exists in Magento.
This also means that all database schema altering operations must be performed explicitly in module setup scripts.</p>
<h2 id="migration-scripts">Migration scripts</h2>
<p>Every time Magento CLI command <code>setup:upgrade</code> is run system compares module versions in <code>setup_module</code> with those defined in <code>etc/module.xml</code> files for every module.
Based on that list of modules that require database migration is complied.</p>
<p>In database table <code>setup_module</code> we can see that two versions are tracked: <code>schema_version</code> and <code>data_version</code>.
Reason behind it is quite simple - there are two types of update scripts that can be defined: schema updates that alter structure of database schema and data updates that introduce or change data in database without changing database structure.
All data scripts are run after all schema scripts to ensure that all required database structure changes were performed first.</p>
<blockquote>
<p>Data migration scripts are often used to provide default data for module to work for.
But there are very useful when structure of module database structure changes and there is need to add new information to existing records to keep them valid.
Data migration scripts could be ran even without schema changes for example when migratin from Magento 2.1 to Magento 2.2 there were security decision made to replace PHP serialization with JSON serialization - here data migration script can be used to recalculate data existing in database to new serialization format.</p>
</blockquote>
<p>Magento will look for following files:</p>
<ul>
<li><code>Setup/InstallSchema.php</code> must implement <code>Magento\Framework\Setup\InstallSchemaInterface</code> will be executed <em>once</em> to perform initial database schema setup for module.</li>
<li><code>Setup/UpgradeSchema.php</code> must implement <code>Magento\Framework\Setup\UpgradeSchemaInterface</code> will be executed every time change in module version is found.</li>
<li><code>Setup/InstallData.php</code> must implement <code>Magento\Framework\Setup\InstallDataInterface</code> will be executed <em>once</em>.</li>
<li><code>Setup/UpgradeData.php</code> must implement <code>Magento\Framework\Setup\UpgradeDataInterface</code> will be executed every time change in module version is found.</li>
</ul>
<p>Note that almost all <code>UpgradeSchema</code> classes You will find use version number comparision in order to find what upgrades should be called (You can expect multiple changes in database scheme during module lifetime, so expect changed to <code>UpgradeSchema</code> class) while this solution is simple to use I would urge You to use different approach.
<code>SchemaSetupInterface</code> passed as migration script argument is capable of checking existence of tables, table columns, indexes or even describing table structure, please consider using those method to calculate actions required to achieve final scheme state.</p>
<h3 id="example-install-script">Example install script</h3>
<p>Here is example install script that will create new database table <code>mmacademy_micro_review</code> with four columns:</p>
<ul>
<li><code>review_id</code> as integer primary key with auto increment</li>
<li><code>product_id</code> as integer field</li>
<li><code>message</code> as text field no longer than 255 characters</li>
<li><code>created_at</code> as timestamp field</li>
</ul>
<pre><code class="lang-php"><span class="hljs-meta">&lt;?php</span>

<span class="hljs-keyword">namespace</span> <span class="hljs-title">MMAcademy</span>\<span class="hljs-title">MicroReview</span>\<span class="hljs-title">Setup</span>;

<span class="hljs-keyword">use</span> <span class="hljs-title">Magento</span>\<span class="hljs-title">Framework</span>\<span class="hljs-title">DB</span>\<span class="hljs-title">Ddl</span>\<span class="hljs-title">Table</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Magento</span>\<span class="hljs-title">Framework</span>\<span class="hljs-title">Setup</span>\<span class="hljs-title">InstallSchemaInterface</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Magento</span>\<span class="hljs-title">Framework</span>\<span class="hljs-title">Setup</span>\<span class="hljs-title">ModuleContextInterface</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Magento</span>\<span class="hljs-title">Framework</span>\<span class="hljs-title">Setup</span>\<span class="hljs-title">SchemaSetupInterface</span>;

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">InstallSchema</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">InstallSchemaInterface</span>
</span>{
    <span class="hljs-comment">/**
     * Installs DB schema for a module
     *
     * <span class="hljs-doctag">@param</span> SchemaSetupInterface   $setup
     * <span class="hljs-doctag">@param</span> ModuleContextInterface $context
     * <span class="hljs-doctag">@return</span> void
     * <span class="hljs-doctag">@throws</span> \Zend_Db_Exception
     * <span class="hljs-doctag">@SuppressWarnings</span>(PHPMD.UnusedFormalParameter)
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">install</span><span class="hljs-params">(SchemaSetupInterface $setup, ModuleContextInterface $context)</span>
    </span>{
        $setup-&gt;startSetup();

        $tableName = $setup-&gt;getTable(<span class="hljs-string">&apos;mmacademy_micro_review&apos;</span>);

        $table = $setup-&gt;getConnection()-&gt;newTable($tableName);
        $table
            -&gt;addColumn(
                <span class="hljs-string">&apos;review_id&apos;</span>,
                Table::TYPE_INTEGER,
                <span class="hljs-keyword">null</span>,
                [<span class="hljs-string">&apos;identity&apos;</span> =&gt; <span class="hljs-keyword">true</span>, <span class="hljs-string">&apos;nullable&apos;</span> =&gt; <span class="hljs-keyword">false</span>, <span class="hljs-string">&apos;primary&apos;</span> =&gt; <span class="hljs-keyword">true</span>],
                <span class="hljs-string">&apos;Review ID&apos;</span>
            )
            -&gt;addColumn(<span class="hljs-string">&apos;product_id&apos;</span>, Table::TYPE_INTEGER, <span class="hljs-keyword">null</span>, [], <span class="hljs-string">&apos;Product ID&apos;</span>)
            -&gt;addColumn(<span class="hljs-string">&apos;message&apos;</span>, Table::TYPE_TEXT, <span class="hljs-number">255</span>, [], <span class="hljs-string">&apos;Review message&apos;</span>)
            -&gt;addColumn(<span class="hljs-string">&apos;created_at&apos;</span>, Table::TYPE_DATETIME, <span class="hljs-keyword">null</span>, [], <span class="hljs-string">&apos;Created At&apos;</span>);

        $setup-&gt;getConnection()-&gt;createTable($table);

        $setup-&gt;endSetup();
    }
}
</code></pre>
<h2 id="database-access-objects">Database access objects</h2>
<p>In order to access data stored in database tables we need three model classes defined for every simple database entity.</p>
<ul>
<li>Model class - allows operation on data in active record like fashion and provides place for basic business logic</li>
<li>Resource model class - is responsible for performing database operation on behalf of model class</li>
<li>Collection class - acts as interface for retrieving large number of object of given type with ability to apply database level filtering.</li>
</ul>
<p>Note that those three classes will be required for all logical datatbase entities but not for all database tables as there are complex strucutres in Magento that persist one logical entity in mutiple database tables.
This is also reason why such elaborate structure is needed - for simple plain oen table entity mapping default implementation is provided but for complex structures that require loading data from multiple tables there is still clear separation of concerns.
Model object will be used in the same way regardless of how complex it&apos;s persistence code is, and this code will be always separated from business logic in resource model.</p>
<h3 id="model-clasess-example">Model clasess example</h3>
<p>Minimal model class has only to indicate what resource model knows how to persist it by executing <code>_init</code> method.</p>
<pre><code class="lang-php"><span class="hljs-meta">&lt;?php</span>

<span class="hljs-keyword">namespace</span> <span class="hljs-title">MMAcademy</span>\<span class="hljs-title">MicroReview</span>\<span class="hljs-title">Model</span>;

<span class="hljs-keyword">use</span> <span class="hljs-title">Magento</span>\<span class="hljs-title">Framework</span>\<span class="hljs-title">Model</span>\<span class="hljs-title">AbstractModel</span>;

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Review</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">AbstractModel</span>
</span>{
    <span class="hljs-keyword">protected</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_construct</span><span class="hljs-params">()</span>
    </span>{
        $this-&gt;_init(ResourceModel\Review::class);
    }
}
</code></pre>
<p>Minimal resource model class has only to indicate what database table it operates on and column that acts as primary index.</p>
<pre><code class="lang-php"><span class="hljs-meta">&lt;?php</span>

<span class="hljs-keyword">namespace</span> <span class="hljs-title">MMAcademy</span>\<span class="hljs-title">MicroReview</span>\<span class="hljs-title">Model</span>\<span class="hljs-title">ResourceModel</span>;

<span class="hljs-keyword">use</span> <span class="hljs-title">Magento</span>\<span class="hljs-title">Framework</span>\<span class="hljs-title">Model</span>\<span class="hljs-title">ResourceModel</span>\<span class="hljs-title">Db</span>\<span class="hljs-title">AbstractDb</span>;

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Review</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">AbstractDb</span>
</span>{
    <span class="hljs-comment">/**
     * Resource initialization
     *
     * <span class="hljs-doctag">@return</span> void
     */</span>
    <span class="hljs-keyword">protected</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_construct</span><span class="hljs-params">()</span>
    </span>{
        $this-&gt;_init(<span class="hljs-string">&apos;mmacademy_micro_review&apos;</span>, <span class="hljs-string">&apos;review_id&apos;</span>);
    }
}
</code></pre>
<p>Collection class has only to indicate model and resource models it is connected to.</p>
<pre><code class="lang-php"><span class="hljs-meta">&lt;?php</span>

<span class="hljs-keyword">namespace</span> <span class="hljs-title">MMAcademy</span>\<span class="hljs-title">MicroReview</span>\<span class="hljs-title">Model</span>\<span class="hljs-title">ResourceModel</span>\<span class="hljs-title">Review</span>;

<span class="hljs-keyword">use</span> <span class="hljs-title">Magento</span>\<span class="hljs-title">Framework</span>\<span class="hljs-title">Model</span>\<span class="hljs-title">ResourceModel</span>\<span class="hljs-title">Db</span>\<span class="hljs-title">Collection</span>\<span class="hljs-title">AbstractCollection</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">MMAcademy</span>\<span class="hljs-title">MicroReview</span>\<span class="hljs-title">Model</span>\<span class="hljs-title">Review</span>;

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Collection</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">AbstractCollection</span>
</span>{
    <span class="hljs-keyword">protected</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_construct</span><span class="hljs-params">()</span>
    </span>{
        $this-&gt;_init(Review::class, \MMAcademy\MicroReview\Model\ResourceModel\Review::class);
    }
}
</code></pre>
<h2 id="next-steps">Next Steps</h2>
<ul>
<li><a href="service_contracts.html">APIs</a></li>
</ul>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="flash_message.html" class="navigation navigation-prev " aria-label="Previous page: Flash message">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="service_contracts.html" class="navigation navigation-next " aria-label="Next page: APIs">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Acessing databade","level":"4.1.7","depth":2,"next":{"title":"APIs","level":"4.1.8","depth":2,"path":"backend/modules/service_contracts.md","ref":"backend/modules/service_contracts.md","articles":[]},"previous":{"title":"Flash message","level":"4.1.6","depth":2,"path":"backend/modules/flash_message.md","ref":"backend/modules/flash_message.md","articles":[]},"dir":"ltr"},"config":{"gitbook":"*","theme":"default","variables":{},"plugins":[],"pluginsConfig":{"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"}},"file":{"path":"backend/modules/database.md","mtime":"2018-01-15T09:27:58.963Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2018-01-15T09:30:14.962Z"},"basePath":"../..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../../gitbook/gitbook.js"></script>
    <script src="../../gitbook/theme.js"></script>
    
        
        <script src="../../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

